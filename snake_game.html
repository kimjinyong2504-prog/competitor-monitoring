<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë„¤ì´í¬ ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
        }

        .game-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            max-width: 650px;
            width: 100%;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px 25px;
            border-radius: 10px;
            margin: 5px;
            min-width: 120px;
        }

        .info-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #ffd700;
        }

        .canvas-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        #gameCanvas {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .controls {
            margin: 20px 0;
        }

        button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            color: white;
            padding: 12px 30px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-weight: bold;
            margin: 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        .game-status {
            margin: 15px 0;
            font-size: 1.3em;
            font-weight: bold;
            min-height: 30px;
        }

        .game-status.game-over {
            color: #ff6b6b;
            animation: pulse 1s infinite;
        }

        .game-status.playing {
            color: #51cf66;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .mobile-controls {
            display: none;
            margin-top: 20px;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 60px);
            gap: 10px;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }

        .mobile-controls button {
            font-size: 1.5em;
            padding: 15px;
            margin: 0;
        }

        .mobile-controls button:nth-child(2) {
            grid-column: 2;
            grid-row: 1;
        }

        .mobile-controls button:nth-child(3) {
            grid-column: 2;
            grid-row: 3;
        }

        .mobile-controls button:nth-child(4) {
            grid-column: 1;
            grid-row: 2;
        }

        .mobile-controls button:nth-child(5) {
            grid-column: 3;
            grid-row: 2;
        }

        .instructions {
            margin-top: 20px;
            font-size: 0.9em;
            opacity: 0.9;
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .mobile-controls {
                display: grid;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ ìŠ¤ë„¤ì´í¬ ê²Œì„</h1>

        <div class="game-info">
            <div class="info-item">
                <div class="info-label">ì ìˆ˜</div>
                <div class="info-value" id="score">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">ìµœê³  ì ìˆ˜</div>
                <div class="info-value" id="highScore">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">ê¸¸ì´</div>
                <div class="info-value" id="length">1</div>
            </div>
        </div>

        <div class="game-status" id="gameStatus">ê²Œì„ì„ ì‹œì‘í•˜ë ¤ë©´ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆ„ë¥´ì„¸ìš”</div>

        <div class="canvas-container">
            <canvas id="gameCanvas" width="600" height="600"></canvas>
        </div>

        <div class="controls">
            <button onclick="startGame()" id="startButton">ê²Œì„ ì‹œì‘</button>
            <button onclick="pauseGame()" id="pauseButton">ì¼ì‹œì •ì§€</button>
            <button onclick="resetGame()" id="resetButton">ë‹¤ì‹œ ì‹œì‘</button>
        </div>

        <div class="mobile-controls">
            <button></button>
            <button onclick="changeDirection('up')">â†‘</button>
            <button></button>
            <button onclick="changeDirection('left')">â†</button>
            <button></button>
            <button></button>
            <button onclick="changeDirection('down')">â†“</button>
            <button></button>
            <button onclick="changeDirection('right')">â†’</button>
        </div>

        <div class="instructions">
            <p><strong>ê²Œì„ ë°©ë²•:</strong></p>
            <p>ë°©í–¥í‚¤(â†‘â†“â†â†’) ë˜ëŠ” WASD í‚¤ë¡œ ë±€ì„ ì¡°ì‘í•˜ì„¸ìš”</p>
            <p>ë¹¨ê°„ ì‚¬ê³¼ë¥¼ ë¨¹ìœ¼ë©´ ê¸¸ì´ê°€ ëŠ˜ì–´ë‚˜ê³  ì ìˆ˜ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤</p>
            <p>ë²½ì´ë‚˜ ìì‹ ì˜ ëª¸ì— ë¶€ë”ªíˆë©´ ê²Œì„ ì˜¤ë²„!</p>
            <p>ìŠ¤í˜ì´ìŠ¤ë°”ë¡œ ê²Œì„ ì‹œì‘/ì¼ì‹œì •ì§€</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        const gridSize = 20;
        const tileCount = canvas.width / gridSize;

        let snake = [{ x: 10, y: 10 }];
        let food = {};
        let dx = 0;
        let dy = 0;
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') ? parseInt(localStorage.getItem('snakeHighScore')) : 0;
        let gameRunning = false;
        let gamePaused = false;
        let nextDirection = null;

        const scoreDisplay = document.getElementById('score');
        const highScoreDisplay = document.getElementById('highScore');
        const lengthDisplay = document.getElementById('length');
        const gameStatus = document.getElementById('gameStatus');
        const startButton = document.getElementById('startButton');
        const pauseButton = document.getElementById('pauseButton');

        // ìµœê³  ì ìˆ˜ í‘œì‹œ
        highScoreDisplay.textContent = highScore;

        function generateFood() {
            food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
            };
            // ë±€ì˜ ëª¸ ìœ„ì— ìŒì‹ì´ ìƒê¸°ì§€ ì•Šë„ë¡
            for (let segment of snake) {
                if (segment.x === food.x && segment.y === food.y) {
                    generateFood();
                    return;
                }
            }
        }

        function drawGame() {
            clearCanvas();
            drawSnake();
            drawFood();
        }

        function clearCanvas() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawSnake() {
            // ëª¸í†µ ë¶€ë¶„ - ëª…í™•í•œ í…Œë‘ë¦¬ì™€ í•¨ê»˜
            ctx.fillStyle = '#51cf66';
            for (let i = 1; i < snake.length; i++) {
                const segment = snake[i];
                const x = segment.x * gridSize;
                const y = segment.y * gridSize;
                
                // ëª¸í†µ ë°°ê²½
                ctx.fillRect(x + 1, y + 1, gridSize - 2, gridSize - 2);
                
                // ëª…í™•í•œ í…Œë‘ë¦¬
                ctx.strokeStyle = '#2d8659';
                ctx.lineWidth = 2;
                ctx.strokeRect(x + 1, y + 1, gridSize - 2, gridSize - 2);
            }
            
            // ë¨¸ë¦¬ ë¶€ë¶„ - ë” ëª…í™•í•˜ê²Œ êµ¬ë¶„
            const head = snake[0];
            const headX = head.x * gridSize;
            const headY = head.y * gridSize;
            
            // ë¨¸ë¦¬ ë°°ê²½ (ë” ë°ì€ ìƒ‰)
            ctx.fillStyle = '#69db7c';
            ctx.fillRect(headX + 1, headY + 1, gridSize - 2, gridSize - 2);
            
            // ë¨¸ë¦¬ í…Œë‘ë¦¬ (ë‘ê»ê²Œ, ëˆˆì— ë„ëŠ” ìƒ‰)
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 3;
            ctx.strokeRect(headX + 1, headY + 1, gridSize - 2, gridSize - 2);
            
            // ë¨¸ë¦¬ ì¤‘ì•™ì— ì‘ì€ ì  (ëˆˆ í‘œì‹œ)
            ctx.fillStyle = '#ffffff';
            ctx.beginPath();
            ctx.arc(headX + gridSize / 2 - 3, headY + gridSize / 2, 2, 0, 2 * Math.PI);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(headX + gridSize / 2 + 3, headY + gridSize / 2, 2, 0, 2 * Math.PI);
            ctx.fill();
        }

        function drawFood() {
            const centerX = food.x * gridSize + gridSize / 2;
            const centerY = food.y * gridSize + gridSize / 2;
            const radius = gridSize / 2 - 2;

            // ê·¸ë¦¼ì íš¨ê³¼
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.beginPath();
            ctx.ellipse(centerX + 1, centerY + radius + 2, radius * 0.6, radius * 0.2, 0, 0, 2 * Math.PI);
            ctx.fill();

            // ì‚¬ê³¼ ë³¸ì²´ ê·¸ë¦¬ê¸° (ì•½ê°„ íƒ€ì›í˜•, ê·¸ë¼ë°ì´ì…˜)
            const gradient = ctx.createRadialGradient(
                centerX - radius * 0.3, centerY - radius * 0.3, 0,
                centerX, centerY, radius * 1.2
            );
            gradient.addColorStop(0, '#ff6b81');
            gradient.addColorStop(0.5, '#ff4757');
            gradient.addColorStop(1, '#ee5a6f');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, radius * 0.9, radius * 1.1, 0, 0, 2 * Math.PI);
            ctx.fill();

            // í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼ (ë¹›ë‚˜ëŠ” ë¶€ë¶„)
            const highlightGradient = ctx.createRadialGradient(
                centerX - radius * 0.3, centerY - radius * 0.3, 0,
                centerX - radius * 0.3, centerY - radius * 0.3, radius * 0.5
            );
            highlightGradient.addColorStop(0, 'rgba(255, 255, 255, 0.4)');
            highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
            
            ctx.fillStyle = highlightGradient;
            ctx.beginPath();
            ctx.ellipse(centerX - radius * 0.3, centerY - radius * 0.3, radius * 0.3, radius * 0.4, -0.5, 0, 2 * Math.PI);
            ctx.fill();

            // ì‚¬ê³¼ ì•„ë˜ìª½ ë“¤ì–´ê°„ ë¶€ë¶„ (ë‘¥ê·¼ ë¶€ë¶„)
            ctx.fillStyle = '#27ae60';
            ctx.beginPath();
            ctx.arc(centerX, centerY + radius * 0.7, radius * 0.35, 0, Math.PI);
            ctx.fill();

            // ìì‚¬ê·€
            ctx.fillStyle = '#2ed573';
            ctx.beginPath();
            ctx.ellipse(centerX - radius * 0.25, centerY - radius * 0.85, radius * 0.25, radius * 0.35, -0.4, 0, 2 * Math.PI);
            ctx.fill();
            
            // ìì‚¬ê·€ ì¤‘ì•™ì„ 
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(centerX - radius * 0.25, centerY - radius * 0.85);
            ctx.lineTo(centerX - radius * 0.15, centerY - radius * 1.15);
            ctx.stroke();

            // í…Œë‘ë¦¬ (ë” ì„¸ë ¨ë˜ê²Œ)
            ctx.strokeStyle = '#ff3838';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, radius * 0.9, radius * 1.1, 0, 0, 2 * Math.PI);
            ctx.stroke();
        }

        function moveSnake() {
            // ë‹¤ìŒ ë°©í–¥ì´ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ì ìš©
            if (nextDirection) {
                const newDx = nextDirection.dx;
                const newDy = nextDirection.dy;
                
                // ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ê°ˆ ìˆ˜ ì—†ë„ë¡ ì²´í¬
                if (!(newDx === -dx && newDy === 0) && !(newDx === dx && newDy === 0) &&
                    !(newDy === -dy && newDx === 0) && !(newDy === dy && newDx === 0)) {
                    dx = newDx;
                    dy = newDy;
                }
                nextDirection = null;
            }

            // ë°©í–¥ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì›€ì§ì´ì§€ ì•ŠìŒ
            if (dx === 0 && dy === 0) {
                return;
            }

            const head = { x: snake[0].x + dx, y: snake[0].y + dy };

            // ë²½ ì¶©ëŒ ì²´í¬
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                gameOver();
                return;
            }

            // ìê¸° ëª¸ ì¶©ëŒ ì²´í¬
            for (let segment of snake) {
                if (head.x === segment.x && head.y === segment.y) {
                    gameOver();
                    return;
                }
            }

            snake.unshift(head);

            // ìŒì‹ ë¨¹ê¸° ì²´í¬
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                scoreDisplay.textContent = score;
                lengthDisplay.textContent = snake.length;
                
                if (score > highScore) {
                    highScore = score;
                    highScoreDisplay.textContent = highScore;
                    localStorage.setItem('snakeHighScore', highScore.toString());
                }
                
                generateFood();
            } else {
                snake.pop();
            }
        }

        function gameOver() {
            gameRunning = false;
            gameStatus.textContent = `ê²Œì„ ì˜¤ë²„! ìµœì¢… ì ìˆ˜: ${score}`;
            gameStatus.className = 'game-status game-over';
            startButton.disabled = false;
            pauseButton.disabled = true;
        }

        function gameLoop() {
            if (!gameRunning || gamePaused) return;

            moveSnake();
            drawGame();

            setTimeout(gameLoop, 150);
        }

        function startGame() {
            if (gameRunning && !gamePaused) return;

            if (!gameRunning) {
                // ìƒˆ ê²Œì„ ì‹œì‘
                snake = [{ x: 10, y: 10 }];
                dx = 0;
                dy = 0;
                score = 0;
                scoreDisplay.textContent = '0';
                lengthDisplay.textContent = '1';
                generateFood();
            }

            gameRunning = true;
            gamePaused = false;
            gameStatus.textContent = 'ë°©í–¥í‚¤ë¥¼ ëˆŒëŸ¬ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!';
            gameStatus.className = 'game-status playing';
            startButton.disabled = true;
            pauseButton.disabled = false;
            
            drawGame();
            gameLoop();
        }

        function pauseGame() {
            if (!gameRunning) return;

            gamePaused = !gamePaused;
            if (gamePaused) {
                gameStatus.textContent = 'ì¼ì‹œì •ì§€ ì¤‘...';
                gameStatus.className = 'game-status';
                pauseButton.textContent = 'ì¬ê°œ';
            } else {
                gameStatus.textContent = 'ê²Œì„ ì¤‘...';
                gameStatus.className = 'game-status playing';
                pauseButton.textContent = 'ì¼ì‹œì •ì§€';
                gameLoop();
            }
        }

        function resetGame() {
            gameRunning = false;
            gamePaused = false;
            snake = [{ x: 10, y: 10 }];
            dx = 0;
            dy = 0;
            score = 0;
            scoreDisplay.textContent = '0';
            lengthDisplay.textContent = '1';
            gameStatus.textContent = 'ê²Œì„ì„ ì‹œì‘í•˜ë ¤ë©´ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆ„ë¥´ì„¸ìš”';
            gameStatus.className = 'game-status';
            startButton.disabled = false;
            pauseButton.disabled = true;
            pauseButton.textContent = 'ì¼ì‹œì •ì§€';
            generateFood();
            drawGame();
        }

        function changeDirection(newDx, newDy) {
            if (!gameRunning || gamePaused) return;
            nextDirection = { dx: newDx, dy: newDy };
            
            // ì²« ë°©í–¥ ì…ë ¥ì´ë©´ ê²Œì„ ì‹œì‘ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
            if (dx === 0 && dy === 0) {
                gameStatus.textContent = 'ê²Œì„ ì¤‘...';
            }
        }

        function changeDirectionByName(direction) {
            if (!gameRunning || gamePaused) return;
            
            switch(direction) {
                case 'up':
                    changeDirection(0, -1);
                    break;
                case 'down':
                    changeDirection(0, 1);
                    break;
                case 'left':
                    changeDirection(-1, 0);
                    break;
                case 'right':
                    changeDirection(1, 0);
                    break;
            }
        }

        // í‚¤ë³´ë“œ ì…ë ¥ ì²˜ë¦¬
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (!gameRunning) {
                    startGame();
                } else {
                    pauseGame();
                }
                return;
            }

            if (gamePaused) return;

            switch(e.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    e.preventDefault();
                    changeDirection(0, -1);
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    e.preventDefault();
                    changeDirection(0, 1);
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    e.preventDefault();
                    changeDirection(-1, 0);
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    e.preventDefault();
                    changeDirection(1, 0);
                    break;
            }
        });

        // ì´ˆê¸° ì„¤ì •
        generateFood();
        drawGame();
    </script>
</body>
</html>
