<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë ˆìŠ¤í† ë‘ íƒ€ì´ì¿¤ - ìˆ˜ë™ ëª¨ë“œ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f9fafb;
            --border: #e5e7eb;
        }

        body {
            font-family: 'Noto Sans KR', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: var(--dark);
            padding: 20px;
            min-height: 100vh;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px;
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        h1 {
            font-size: 3em;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            font-weight: 900;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .top-bar {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 20px;
            margin-bottom: 25px;
            align-items: center;
        }

        .level-section {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .level-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .level-text {
            font-size: 1.3em;
            font-weight: bold;
        }

        .level-bar-container {
            width: 100%;
            height: 25px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .level-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #f093fb, #f5576c);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            border: 2px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--primary);
        }

        .stat-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--dark);
        }

        .main-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        .restaurant-simulation {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        .restaurant-title {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        #restaurantCanvas {
            width: 100%;
            height: 350px;
            background: white;
            border-radius: 15px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }

        .management-panels {
            display: grid;
            gap: 20px;
        }

        .panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--border);
            transition: all 0.3s;
        }

        .panel:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            border-color: var(--primary);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--primary);
        }

        .panel h2 {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--secondary);
            margin: 0;
        }

        .panel-count {
            background: var(--primary);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .item-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .item-list::-webkit-scrollbar {
            width: 8px;
        }

        .item-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .item-list::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .item-card {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 18px;
            margin-bottom: 12px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .item-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            border-color: var(--primary);
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            font-weight: 700;
            font-size: 1.1em;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .item-details {
            font-size: 0.9em;
            color: #666;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .item-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            font-family: 'Noto Sans KR', sans-serif;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #d97706);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--info), #2563eb);
        }

        input[type="number"], input[type="text"] {
            width: 100px;
            padding: 10px;
            border: 2px solid var(--border);
            border-radius: 8px;
            text-align: center;
            font-size: 0.95em;
            transition: all 0.3s;
            font-family: 'Noto Sans KR', sans-serif;
        }

        input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .price-tag {
            color: var(--success);
            font-weight: 700;
        }

        .cost-tag {
            color: var(--danger);
            font-weight: 700;
        }

        .profit-tag {
            color: var(--info);
            font-weight: 700;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .control-button {
            padding: 15px 35px;
            font-size: 1.1em;
            min-width: 150px;
        }

        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 20px 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            animation: slideInRight 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            font-weight: 600;
            max-width: 300px;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .modal-header {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--secondary);
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .customer-queue-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .customer-card {
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
            padding: 18px;
            margin-bottom: 12px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .customer-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            border-color: var(--success);
        }

        .wait-time-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .wait-time-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--warning), var(--danger));
            transition: width 0.3s;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            color: #666;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: none;
        }

        .tab-button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ğŸ½ï¸ ë ˆìŠ¤í† ë‘ íƒ€ì´ì¿¤</h1>
            <p class="subtitle">ìˆ˜ë™ ëª¨ë“œ - ì§ì ‘ ë ˆìŠ¤í† ë‘ì„ ìš´ì˜í•˜ì„¸ìš”!</p>
        </div>

        <div class="top-bar">
            <div class="level-section">
                <div class="level-info">
                    <span class="level-text">ë ˆë²¨ <span id="level">1</span></span>
                    <span id="expText">0 / 100 XP</span>
                </div>
                <div class="level-bar-container">
                    <div class="level-bar-fill" id="levelProgress" style="width: 0%">0%</div>
                </div>
            </div>
            <div class="quick-stats">
                <div class="stat-card">
                    <span class="stat-icon">ğŸ’°</span>
                    <div class="stat-label">ìê¸ˆ</div>
                    <div class="stat-value" id="money">â‚©1,000</div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">ğŸ‘¥</span>
                    <div class="stat-label">ì†ë‹˜ ìˆ˜</div>
                    <div class="stat-value" id="customersServed">0</div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">â­</span>
                    <div class="stat-label">í‰ì </div>
                    <div class="stat-value" id="rating">3.0</div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">â±ï¸</span>
                    <div class="stat-label">í”Œë ˆì´ ì‹œê°„</div>
                    <div class="stat-value" id="gameTime">00:00</div>
                </div>
            </div>
        </div>

        <div class="main-layout">
            <div class="restaurant-simulation">
                <div class="restaurant-title" id="restaurantName">ì‘ì€ ì‹ë‹¹</div>
                <canvas id="restaurantCanvas"></canvas>
                <div style="text-align: center; margin-top: 15px;">
                    <button onclick="spawnCustomer()" class="btn-success" style="font-size: 1.1em; padding: 15px 30px;">
                        ğŸ‘¤ ì†ë‹˜ ì…ì¥ì‹œí‚¤ê¸°
                    </button>
                </div>
            </div>

            <div class="management-panels">
                <div class="customer-queue-panel">
                    <div class="panel-header">
                        <h2>ğŸ‘¥ ëŒ€ê¸° ì†ë‹˜</h2>
                        <span class="panel-count" id="queueCount">0</span>
                    </div>
                    <div style="background: #f0f9ff; padding: 10px; border-radius: 10px; margin-bottom: 10px; text-align: center;">
                        <strong>ğŸ³ ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥: <span id="concurrentCooking">1</span>ê°œ</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                            ì£¼ë°©ì¥/ìš”ë¦¬ì‚¬: <span id="chefCount">0</span>ëª…
                        </div>
                    </div>
                    <div class="item-list" id="customerQueueList"></div>
                    <div style="text-align: center; margin-top: 10px; color: #666; font-size: 0.9em;">
                        ì†ë‹˜ì„ í´ë¦­í•˜ê±°ë‚˜ ì„œë¹™ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-buttons">
            <button class="tab-button active" onclick="switchTab('menu')">ğŸ“‹ ë©”ë‰´ ê´€ë¦¬</button>
            <button class="tab-button" onclick="switchTab('employee')">ğŸ‘¨â€ğŸ³ ì§ì› ê´€ë¦¬</button>
            <button class="tab-button" onclick="switchTab('upgrade')">ğŸ—ï¸ í™•ì¥ & ì—…ê·¸ë ˆì´ë“œ</button>
        </div>

        <div id="menuTab" class="tab-content active">
            <div class="panel">
                <div class="panel-header">
                    <h2>ğŸ“‹ ë©”ë‰´ ê´€ë¦¬</h2>
                    <span class="panel-count" id="menuCountBadge">3</span>
                </div>
                <div class="item-list" id="menuList"></div>
                <button onclick="showAddMenuModal()" style="width: 100%; margin-top: 15px;" class="btn-success">
                    + ìƒˆ ë©”ë‰´ ì¶”ê°€
                </button>
            </div>
        </div>

        <div id="employeeTab" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2>ğŸ‘¨â€ğŸ³ ì§ì› ê´€ë¦¬</h2>
                    <span class="panel-count" id="employeeCountBadge">0</span>
                </div>
                <div class="item-list" id="employeeList"></div>
                <button onclick="showHireEmployeeModal()" style="width: 100%; margin-top: 15px;" class="btn-success">
                    + ì§ì› ê³ ìš©
                </button>
            </div>
        </div>

        <div id="upgradeTab" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2>ğŸ—ï¸ ë ˆìŠ¤í† ë‘ í™•ì¥</h2>
                </div>
                <div class="item-list" id="upgradeList"></div>
            </div>
        </div>

        <div class="game-controls">
            <button class="control-button btn-info" onclick="showStatsModal()">ğŸ“Š ìƒì„¸ í†µê³„</button>
            <button class="control-button btn-success" onclick="saveGame()">ğŸ’¾ ì €ì¥</button>
            <button class="control-button btn-warning" onclick="loadGame()">ğŸ“‚ ë¶ˆëŸ¬ì˜¤ê¸°</button>
        </div>
    </div>

    <!-- ëª¨ë‹¬ë“¤ -->
    <div id="addMenuModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">ìƒˆ ë©”ë‰´ ì¶”ê°€</div>
            <div class="modal-body">
                <label style="display: block; margin-bottom: 10px; font-weight: 600;">ë©”ë‰´ ì´ë¦„:</label>
                <input type="text" id="menuNameInput" style="width: 100%; margin-bottom: 15px;" placeholder="ì˜ˆ: ë¶ˆê³ ê¸°">
                <label style="display: block; margin-bottom: 10px; font-weight: 600;">íŒë§¤ê°€ (ì›):</label>
                <input type="number" id="menuPriceInput" style="width: 100%; margin-bottom: 15px;" min="1000" value="10000">
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('addMenuModal')" class="btn-danger">ì·¨ì†Œ</button>
                <button onclick="addNewMenu()" class="btn-success">ì¶”ê°€</button>
            </div>
        </div>
    </div>

    <div id="statsModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">ğŸ“Š ìƒì„¸ í†µê³„</div>
            <div class="modal-body">
                <div class="stats-grid" id="detailedStats"></div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('statsModal')" class="btn-info">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <div id="hireEmployeeModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">ğŸ‘¨â€ğŸ³ ì§ì› ê³ ìš©</div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: #666;">ê³ ìš©í•  ì§ì›ì˜ ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”:</p>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="item-card" style="cursor: pointer; text-align: center; padding: 20px;" onclick="hireEmployeeWithRole('ì£¼ë°©ì¥')">
                        <div style="font-size: 3em; margin-bottom: 10px;">ğŸ‘¨â€ğŸ³</div>
                        <div class="item-name">ì£¼ë°©ì¥</div>
                        <div class="item-details" style="margin-top: 10px;">
                            <div>íš¨ê³¼: ë™ì‹œ ìš”ë¦¬ +1ê°œ</div>
                            <div style="color: var(--danger); font-weight: bold; margin-top: 5px;">
                                ê¸‰ì—¬: <span class="cost-tag">â‚©0/ì¼</span>
                            </div>
                        </div>
                    </div>
                    <div class="item-card" style="cursor: pointer; text-align: center; padding: 20px;" onclick="hireEmployeeWithRole('ìš”ë¦¬ì‚¬')">
                        <div style="font-size: 3em; margin-bottom: 10px;">ğŸ³</div>
                        <div class="item-name">ìš”ë¦¬ì‚¬</div>
                        <div class="item-details" style="margin-top: 10px;">
                            <div>íš¨ê³¼: ë™ì‹œ ìš”ë¦¬ +1ê°œ</div>
                            <div style="color: var(--danger); font-weight: bold; margin-top: 5px;">
                                ê¸‰ì—¬: <span class="cost-tag">â‚©0/ì¼</span>
                            </div>
                        </div>
                    </div>
                    <div class="item-card" style="cursor: pointer; text-align: center; padding: 20px;" onclick="hireEmployeeWithRole('ì„œë²„')">
                        <div style="font-size: 3em; margin-bottom: 10px;">ğŸ½ï¸</div>
                        <div class="item-name">ì„œë²„</div>
                        <div class="item-details" style="margin-top: 10px;">
                            <div>íš¨ê³¼: ì†ë‹˜ ìˆ˜ìš© +1ëª…</div>
                            <div style="color: var(--danger); font-weight: bold; margin-top: 5px;">
                                ê¸‰ì—¬: <span class="cost-tag">â‚©0/ì¼</span>
                            </div>
                        </div>
                    </div>
                    <div class="item-card" style="cursor: pointer; text-align: center; padding: 20px;" onclick="hireEmployeeWithRole('í™€ë§¤ë‹ˆì €')">
                        <div style="font-size: 3em; margin-bottom: 10px;">ğŸ‘”</div>
                        <div class="item-name">í™€ë§¤ë‹ˆì €</div>
                        <div class="item-details" style="margin-top: 10px;">
                            <div>íš¨ê³¼: ì†ë‹˜ ìˆ˜ìš© +2ëª…</div>
                            <div style="color: var(--danger); font-weight: bold; margin-top: 5px;">
                                ê¸‰ì—¬: <span class="cost-tag">â‚©0/ì¼</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #f0f9ff; border-radius: 10px;">
                    <strong>ì—­í•  ì„¤ëª…:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px; line-height: 1.8;">
                        <li><strong>ì£¼ë°©ì¥/ìš”ë¦¬ì‚¬:</strong> ë™ì‹œì— ìš”ë¦¬í•  ìˆ˜ ìˆëŠ” ê°œìˆ˜ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤</li>
                        <li><strong>ì„œë²„:</strong> ì†ë‹˜ ìˆ˜ìš© ì¸ì›ì„ 1ëª… ì¦ê°€ì‹œí‚µë‹ˆë‹¤</li>
                        <li><strong>í™€ë§¤ë‹ˆì €:</strong> ì†ë‹˜ ìˆ˜ìš© ì¸ì›ì„ 2ëª… ì¦ê°€ì‹œí‚µë‹ˆë‹¤</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('hireEmployeeModal')" class="btn-danger">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <div id="orderMenuModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">ğŸ“‹ ì£¼ë¬¸ ë°›ê¸°</div>
            <div class="modal-body">
                <p style="margin-bottom: 15px; color: #666;">ì†ë‹˜ì´ ì£¼ë¬¸í•  ë©”ë‰´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”:</p>
                <div id="orderMenuList" style="max-height: 400px; overflow-y: auto;"></div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('orderMenuModal')" class="btn-danger">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            money: 1000,
            level: 1,
            experience: 0,
            experienceToNext: 100,
            customersServed: 0,
            rating: 3.0,
            gameTime: 0,
            totalRevenue: 0,
            totalCost: 0,
            menus: [
                { id: 1, name: 'ê¹€ì¹˜ì°Œê°œ', price: 8000, cost: 3000, popularity: 1.0, sales: 0 },
                { id: 2, name: 'ëœì¥ì°Œê°œ', price: 7000, cost: 2500, popularity: 0.9, sales: 0 },
                { id: 3, name: 'ë¹„ë¹”ë°¥', price: 9000, cost: 3500, popularity: 1.1, sales: 0 }
            ],
            employees: [],
            upgrades: [
                { id: 1, name: 'ì£¼ë°© í™•ì¥', cost: 5000, level: 0, maxLevel: 5, effect: 'ì„œë¹™ ì†ë„ +20%', icon: 'ğŸ³' },
                { id: 2, name: 'í™€ í™•ì¥', cost: 10000, level: 0, maxLevel: 5, effect: 'ì†ë‹˜ ìˆ˜ìš© +2', icon: 'ğŸª‘' },
                { id: 3, name: 'ì¸í…Œë¦¬ì–´ ê°œì„ ', cost: 15000, level: 0, maxLevel: 3, effect: 'í‰ì  +0.5', icon: 'ğŸ¨' },
                { id: 4, name: 'ê´‘ê³  ìº í˜ì¸', cost: 20000, level: 0, maxLevel: 3, effect: 'ì¸ê¸°ë„ +30%', icon: 'ğŸ“¢' }
            ],
            customerQueue: [],
            maxCustomers: 3,
            maxConcurrentCooking: 1  // ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥ ìˆ˜ (ì§ì› ìˆ˜ì— ë”°ë¼ ì¦ê°€)
        };

        let gameInterval;
        let canvas, ctx;
        let animationFrame;

        function initGame() {
            console.log('ê²Œì„ ì´ˆê¸°í™” ì‹œì‘');
            canvas = document.getElementById('restaurantCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            updateDisplay();
            renderMenus();
            renderEmployees();
            renderUpgrades();
            updateCookingInfo();
            renderCustomerQueue();
            setupCanvasEvents();  // Canvas ì´ë²¤íŠ¸ ì„¤ì •
            startGameLoop();
            animateCanvas();
            console.log('ê²Œì„ ì´ˆê¸°í™” ì™„ë£Œ');
        }

        function startGameLoop() {
            // ê¸°ì¡´ ì¸í„°ë²Œ ì •ë¦¬
            if (gameInterval) {
                clearInterval(gameInterval);
                gameInterval = null;
            }

            // ê²Œì„ ë£¨í”„ ì‹œì‘ (1ì´ˆë§ˆë‹¤ ì‹¤í–‰)
            gameInterval = setInterval(() => {
                try {
                    // í”Œë ˆì´ ì‹œê°„ ì¦ê°€
                    gameState.gameTime++;
                    
                    // ì†ë‹˜ ëŒ€ê¸° ì‹œê°„ ì—…ë°ì´íŠ¸ ë° ë§Œì¡±ë„ ê°ì†Œ
                    const customersToRemove = [];
                    
                    // í˜„ì¬ ìš”ë¦¬ ì¤‘ì¸ ì†ë‹˜ ìˆ˜ ê³„ì‚°
                    const currentlyCooking = gameState.customerQueue.filter(c => c.orderStatus === 'cooking').length;
                    
                    gameState.customerQueue.forEach((customer, index) => {
                        // ê²½ê³¼ ì‹œê°„ ì¦ê°€ (ê° ì†ë‹˜ ë…ë¦½ì ìœ¼ë¡œ)
                        customer.waitTime += 1;
                        
                        // ìš”ë¦¬ ì¤‘ì¸ ì†ë‹˜ë§Œ ìš”ë¦¬ ì‹œê°„ ì¦ê°€ (ë™ì‹œ ìš”ë¦¬ ìˆ˜ ì œí•œ)
                        if (customer.orderStatus === 'cooking') {
                            // ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥ ìˆ˜ë¥¼ ì´ˆê³¼í•˜ë©´ ëŒ€ê¸° ìƒíƒœë¡œ ë³€ê²½
                            const cookingIndex = gameState.customerQueue
                                .filter(c => c.orderStatus === 'cooking' || c.orderStatus === 'waiting_to_cook')
                                .findIndex(c => c.id === customer.id);
                            
                            // ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥ ìˆ˜ ë‚´ì— ìˆìœ¼ë©´ ìš”ë¦¬ ì§„í–‰
                            if (cookingIndex < gameState.maxConcurrentCooking) {
                                customer.cookingTime += 1;
                                if (customer.cookingTime >= customer.cookingTimeNeeded) {
                                    customer.orderStatus = 'ready';
                                    // ì•Œë¦¼ì€ í•œ ë²ˆë§Œ í‘œì‹œí•˜ê¸° ìœ„í•´ ì²´í¬
                                    if (!customer.notifiedReady) {
                                        customer.notifiedReady = true;
                                        showNotification(`${customer.order.name} ìš”ë¦¬ ì™„ë£Œ! ì„œë¹™í•˜ì„¸ìš”!`, 'success');
                                    }
                                }
                            } else {
                                // ìš”ë¦¬ ëŒ€ê¸° ìƒíƒœ
                                customer.orderStatus = 'waiting_to_cook';
                            }
                        } else if (customer.orderStatus === 'waiting_to_cook') {
                            // ëŒ€ê¸° ì¤‘ì¸ ì†ë‹˜ì´ ìš”ë¦¬ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
                            const currentlyCookingCount = gameState.customerQueue.filter(c => c.orderStatus === 'cooking').length;
                            if (currentlyCookingCount < gameState.maxConcurrentCooking) {
                                customer.orderStatus = 'cooking';
                            }
                        }
                        
                        // ë‚¨ì€ ì‹œê°„ ê³„ì‚°: ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ - ê²½ê³¼ ì‹œê°„
                        const remainingTime = Math.max(0, customer.maxWaitTime - customer.waitTime);
                        
                        // ë‚¨ì€ ì‹œê°„ì— ë¹„ë¡€í•´ì„œ ë§Œì¡±ë„ ê°ì†Œ
                        const waitPercent = customer.waitTime / customer.maxWaitTime;
                        if (waitPercent > 0.5) {
                            // 50% ì´ìƒ ëŒ€ê¸° ì‹œ ë§Œì¡±ë„ ê°ì†Œ ì‹œì‘
                            const decreaseRate = (waitPercent - 0.5) * 0.2; // ì ì§„ì  ê°ì†Œ
                            customer.satisfaction = Math.max(0.5, customer.satisfaction - decreaseRate);
                        }
                        
                        // ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ ì´ˆê³¼ ì‹œ ì†ë‹˜ì´ ë– ë‚¨
                        if (remainingTime <= 0) {
                            customersToRemove.push(customer.id);
                        }
                    });
                    
                    // ëŒ€ê¸° ì‹œê°„ ì´ˆê³¼í•œ ì†ë‹˜ë“¤ ì œê±°
                    customersToRemove.forEach(customerId => {
                        const customerIndex = gameState.customerQueue.findIndex(c => c.id === customerId);
                        if (customerIndex !== -1) {
                            const customer = gameState.customerQueue[customerIndex];
                            gameState.customerQueue.splice(customerIndex, 1);
                            
                            // ì†ë‹˜ì´ ë– ë‚  ë•Œ í‰ì  ê°ì†Œ
                            const ratingPenalty = 0.1;
                            gameState.rating = Math.max(1.0, gameState.rating - ratingPenalty);
                            
                            showNotification(`ğŸ˜¤ ì†ë‹˜ì´ ê¸°ë‹¤ë¦¼ì— ì§€ì³ ë– ë‚¬ìŠµë‹ˆë‹¤! (í‰ì  -${ratingPenalty})`, 'warning');
                        }
                    });
                    
                    // í™”ë©´ ì—…ë°ì´íŠ¸ (ë§¤ë²ˆ ì‹¤í–‰)
                    updateDisplay();
                    updateCookingInfo();
                    renderCustomerQueue();
                } catch (error) {
                    console.error('ê²Œì„ ë£¨í”„ ì˜¤ë¥˜:', error);
                    console.error('ìŠ¤íƒ:', error.stack);
                }
            }, 1000);
            
            console.log('ê²Œì„ ë£¨í”„ ì‹œì‘ë¨ - 1ì´ˆë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤');
        }

        function spawnCustomer() {
            if (gameState.customerQueue.length >= gameState.maxCustomers) {
                showNotification('ì†ë‹˜ ìˆ˜ìš© í•œë„ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤!', 'warning');
                return;
            }

            // ì†ë‹˜ì´ ì…ì¥í•˜ê³  ìë™ìœ¼ë¡œ ë©”ë‰´ë¥¼ ì„ íƒ
            const menu = gameState.menus[Math.floor(Math.random() * gameState.menus.length)];
            const cookingTime = getCookingTime(menu);
            
            // ì¼ë°˜ íƒ€ì´ì¿¤ ë°©ì‹: ê° ì†ë‹˜ì€ ë…ë¦½ì ì¸ ëŒ€ê¸° ì‹œê°„ì„ ê°€ì§
            // ëŒ€ê¸° ì‹œê°„ = ìš”ë¦¬ ì‹œê°„ + ì—¬ìœ  ì‹œê°„ (ìš”ë¦¬ ì‹œê°„ì˜ 2.5ë°°)
            const maxWaitTime = Math.floor(cookingTime * 2.5);
            
            // í˜„ì¬ ìš”ë¦¬ ì¤‘ì¸ ì†ë‹˜ ìˆ˜ í™•ì¸
            const currentlyCooking = gameState.customerQueue.filter(c => c.orderStatus === 'cooking').length;
            
            // ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥ ìˆ˜ë¥¼ ì´ˆê³¼í•˜ë©´ ëŒ€ê¸° ìƒíƒœë¡œ ì‹œì‘
            let initialStatus = 'cooking';
            if (currentlyCooking >= gameState.maxConcurrentCooking) {
                initialStatus = 'waiting_to_cook';
            }
            
            const customer = {
                id: Date.now() + Math.random(),
                order: menu,  // ì†ë‹˜ì´ ìë™ìœ¼ë¡œ ë©”ë‰´ ì„ íƒ
                orderStatus: initialStatus,  // ìš”ë¦¬ ì‹œì‘ ë˜ëŠ” ëŒ€ê¸°
                waitTime: 0,  // ê²½ê³¼ ì‹œê°„
                maxWaitTime: maxWaitTime,  // ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ (ë…ë¦½ì )
                cookingTime: 0,  // í˜„ì¬ ìš”ë¦¬ ì§„í–‰ ì‹œê°„
                cookingTimeNeeded: cookingTime,  // í•„ìš”í•œ ìš”ë¦¬ ì‹œê°„
                satisfaction: 5.0,
                startTime: gameState.gameTime  // ì…ì¥ ì‹œê°„ ê¸°ë¡
            };
            
            gameState.customerQueue.push(customer);
            renderCustomerQueue();
            showNotification(`ìƒˆ ì†ë‹˜ì´ ì…ì¥í–ˆìŠµë‹ˆë‹¤! ${menu.name} ì£¼ë¬¸ (ìš”ë¦¬ ì‹œê°„: ${cookingTime}ì´ˆ)`, 'info');
        }
        
        function takeOrder(customerId) {
            const customerIndex = gameState.customerQueue.findIndex(c => c.id === customerId);
            if (customerIndex === -1) return;
            
            const customer = gameState.customerQueue[customerIndex];
            
            if (customer.orderStatus !== 'waiting') {
                showNotification('ì´ë¯¸ ì£¼ë¬¸ì„ ë°›ì•˜ìŠµë‹ˆë‹¤!', 'warning');
                return;
            }
            
            // ë©”ë‰´ ì„ íƒ ëª¨ë‹¬ í‘œì‹œ
            showOrderMenuModal(customerId);
        }
        
        function confirmOrder(customerId, menuId) {
            const customerIndex = gameState.customerQueue.findIndex(c => c.id === customerId);
            if (customerIndex === -1) return;
            
            const customer = gameState.customerQueue[customerIndex];
            const menu = gameState.menus.find(m => m.id === menuId);
            
            if (!menu) return;
            
            // ê°€ê²©ì— ë¹„ë¡€í•œ ìš”ë¦¬ ì‹œê°„ ê³„ì‚°
            const cookingTime = getCookingTime(menu);
            
            customer.order = menu;
            customer.selectedMenu = menu;
            customer.orderStatus = 'cooking';
            customer.cookingTime = 0;
            customer.cookingTimeNeeded = cookingTime;
            
            closeModal('orderMenuModal');
            renderCustomerQueue();
            showNotification(`${menu.name} ì£¼ë¬¸ì„ ë°›ì•˜ìŠµë‹ˆë‹¤! ìš”ë¦¬ ì¤‘... (${cookingTime}ì´ˆ ì†Œìš”)`, 'info');
        }
        
        function getCookingTime(menu) {
            // ê°€ê²©ì— ë¹„ë¡€í•´ì„œ ìš”ë¦¬ ì‹œê°„ ê³„ì‚°
            // ê¸°ë³¸ 3ì´ˆ + (ê°€ê²© / 1000)ì´ˆ (ìµœì†Œ 3ì´ˆ, ìµœëŒ€ 15ì´ˆ)
            const baseTime = 3;
            const priceBasedTime = Math.floor(menu.price / 1000);
            const cookingTime = Math.min(Math.max(baseTime + priceBasedTime, 3), 15);
            return cookingTime;
        }
        
        function showOrderMenuModal(customerId) {
            const modal = document.getElementById('orderMenuModal');
            const menuList = document.getElementById('orderMenuList');
            
            menuList.innerHTML = '';
            
            if (gameState.menus.length === 0) {
                menuList.innerHTML = '<div class="empty-state"><p>ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë©”ë‰´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”!</p></div>';
            } else {
                gameState.menus.forEach(menu => {
                    const cookingTime = getCookingTime(menu);
                    const menuDiv = document.createElement('div');
                    menuDiv.className = 'item-card';
                    menuDiv.style.cursor = 'pointer';
                    menuDiv.onclick = () => confirmOrder(customerId, menu.id);
                    menuDiv.innerHTML = `
                        <div class="item-info">
                            <div class="item-name">${menu.name}</div>
                            <div class="item-details">
                                <span class="price-tag">â‚©${menu.price.toLocaleString()}</span>
                                <span style="color: #666;">ìš”ë¦¬ ì‹œê°„: ${cookingTime}ì´ˆ</span>
                            </div>
                        </div>
                    `;
                    menuList.appendChild(menuDiv);
                });
            }
            
            modal.dataset.customerId = customerId;
            modal.classList.add('active');
        }

        function serveCustomer(customerId) {
            const customerIndex = gameState.customerQueue.findIndex(c => c.id === customerId);
            if (customerIndex === -1) return;

            const customer = gameState.customerQueue[customerIndex];
            
            // ìš”ë¦¬ê°€ ì™„ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì„œë¹™ ë¶ˆê°€
            if (customer.orderStatus !== 'ready') {
                if (customer.orderStatus === 'cooking') {
                    const remainingCookTime = customer.cookingTimeNeeded - customer.cookingTime;
                    showNotification(`ìš”ë¦¬ ì¤‘ì…ë‹ˆë‹¤! ${remainingCookTime}ì´ˆ ë‚¨ì•˜ìŠµë‹ˆë‹¤.`, 'warning');
                }
                return;
            }
            
            const profit = customer.order.price - customer.order.cost;
            
            // ë§Œì¡±ë„ì— ë”°ë¼ ìˆ˜ìµ ì¡°ì • (ë§Œì¡±ë„ê°€ ë‚®ìœ¼ë©´ íŒ ê°ì†Œ)
            const satisfactionMultiplier = customer.satisfaction / 5.0;
            const adjustedProfit = Math.floor(profit * satisfactionMultiplier);
            
            gameState.money += adjustedProfit;
            gameState.totalRevenue += customer.order.price;
            gameState.totalCost += customer.order.cost;
            gameState.customersServed++;
            gameState.experience += 10;
            customer.order.sales++;
            
            if (gameState.experience >= gameState.experienceToNext) {
                levelUp();
            }

            // í‰ì  ê³„ì‚° (ë§Œì¡±ë„ì™€ ëŒ€ê¸° ì‹œê°„ ê³ ë ¤)
            const waitPercent = customer.waitTime / customer.maxWaitTime;
            let satisfactionBonus = customer.satisfaction / 10;
            
            // ëŒ€ê¸° ì‹œê°„ì´ ì§§ì„ìˆ˜ë¡ ë³´ë„ˆìŠ¤
            if (waitPercent < 0.5) {
                satisfactionBonus += 0.1; // ë¹ ë¥¸ ì„œë¹™ ë³´ë„ˆìŠ¤
            }
            
            gameState.rating = Math.min(5.0, gameState.rating + satisfactionBonus);
            gameState.rating = Math.max(1.0, gameState.rating);

            gameState.customerQueue.splice(customerIndex, 1);
            renderCustomerQueue();
            updateDisplay();
            
            // ë§Œì¡±ë„ì— ë”°ë¥¸ ë©”ì‹œì§€
            let message = `+â‚©${adjustedProfit.toLocaleString()} ìˆ˜ìµ! (${customer.order.name})`;
            if (customer.satisfaction < 3.0) {
                message += ' - ë§Œì¡±ë„ê°€ ë‚®ì•„ ìˆ˜ìµì´ ê°ì†Œí–ˆìŠµë‹ˆë‹¤';
            } else if (waitPercent < 0.5) {
                message += ' - ë¹ ë¥¸ ì„œë¹™ ë³´ë„ˆìŠ¤!';
            }
            
            showNotification(message, customer.satisfaction >= 3.0 ? 'success' : 'warning');
        }

        function levelUp() {
            gameState.level++;
            gameState.experience = 0;
            gameState.experienceToNext = Math.floor(gameState.experienceToNext * 1.5);
            gameState.money += gameState.level * 2000;
            showNotification(`ğŸ‰ ë ˆë²¨ ì—…! ë ˆë²¨ ${gameState.level} ë‹¬ì„±!`, 'success');
        }

        function updateDisplay() {
            try {
                // ìê¸ˆ ì—…ë°ì´íŠ¸
                const moneyEl = document.getElementById('money');
                if (moneyEl) moneyEl.textContent = `â‚©${gameState.money.toLocaleString()}`;
                
                // ì†ë‹˜ ìˆ˜ ì—…ë°ì´íŠ¸
                const customersEl = document.getElementById('customersServed');
                if (customersEl) customersEl.textContent = gameState.customersServed;
                
                // í‰ì  ì—…ë°ì´íŠ¸
                const ratingEl = document.getElementById('rating');
                if (ratingEl) ratingEl.textContent = gameState.rating.toFixed(1);
                
                // ë ˆë²¨ ì—…ë°ì´íŠ¸
                const levelEl = document.getElementById('level');
                if (levelEl) levelEl.textContent = gameState.level;
                
                // ê²½í—˜ì¹˜ ì—…ë°ì´íŠ¸
                const expEl = document.getElementById('expText');
                if (expEl) expEl.textContent = `${gameState.experience} / ${gameState.experienceToNext} XP`;
                
                // í”Œë ˆì´ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì¤‘ìš”!)
                const minutes = Math.floor(gameState.gameTime / 60);
                const seconds = gameState.gameTime % 60;
                const gameTimeEl = document.getElementById('gameTime');
                if (gameTimeEl) {
                    gameTimeEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                }

                // ë ˆë²¨ ì§„í–‰ë„ ì—…ë°ì´íŠ¸
                const progress = (gameState.experience / gameState.experienceToNext) * 100;
                const levelProgressEl = document.getElementById('levelProgress');
                if (levelProgressEl) {
                    levelProgressEl.style.width = `${progress}%`;
                    levelProgressEl.textContent = `${Math.floor(progress)}%`;
                }

                // ë ˆìŠ¤í† ë‘ ì´ë¦„ ì—…ë°ì´íŠ¸
                const names = ['ì‘ì€ ì‹ë‹¹', 'ì¸ê¸° ì‹ë‹¹', 'ìœ ëª… ë ˆìŠ¤í† ë‘', 'í”„ë¦¬ë¯¸ì—„ ë ˆìŠ¤í† ë‘', 'ë¯¸ìŠë­ ë ˆìŠ¤í† ë‘'];
                const nameIndex = Math.min(Math.floor(gameState.level / 5), names.length - 1);
                const restaurantNameEl = document.getElementById('restaurantName');
                if (restaurantNameEl) restaurantNameEl.textContent = names[nameIndex];
            } catch (error) {
                console.error('í™”ë©´ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
            }
        }

        function renderMenus() {
            const menuList = document.getElementById('menuList');
            menuList.innerHTML = '';
            
            if (gameState.menus.length === 0) {
                menuList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ½ï¸</div><p>ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤</p></div>';
                return;
            }

            gameState.menus.forEach(menu => {
                const menuDiv = document.createElement('div');
                menuDiv.className = 'item-card';
                const profit = menu.price - menu.cost;
                const profitMargin = ((profit / menu.price) * 100).toFixed(1);
                
                menuDiv.innerHTML = `
                    <div class="item-info">
                        <div class="item-name">${menu.name}</div>
                        <div class="item-details">
                            <span class="detail-item">
                                <span class="price-tag">íŒë§¤ê°€: â‚©${menu.price.toLocaleString()}</span>
                            </span>
                            <span class="detail-item">
                                <span class="cost-tag">ì›ê°€: â‚©${menu.cost.toLocaleString()}</span>
                            </span>
                            <span class="detail-item">
                                <span class="profit-tag">ìˆ˜ìµ: â‚©${profit.toLocaleString()} (${profitMargin}%)</span>
                            </span>
                            <span class="detail-item">
                                íŒë§¤ëŸ‰: ${menu.sales}ê°œ
                            </span>
                        </div>
                    </div>
                    <div class="item-actions">
                        <input type="number" value="${menu.price}" min="${menu.cost}" 
                               onchange="updateMenuPrice(${menu.id}, this.value)" 
                               style="width: 120px;">
                        <button onclick="removeMenu(${menu.id})" class="btn-danger">ì‚­ì œ</button>
                    </div>
                `;
                menuList.appendChild(menuDiv);
            });
            
            document.getElementById('menuCountBadge').textContent = gameState.menus.length;
        }

        function renderEmployees() {
            const employeeList = document.getElementById('employeeList');
            employeeList.innerHTML = '';
            
            if (gameState.employees.length === 0) {
                employeeList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ‘¤</div><p>ì§ì›ì´ ì—†ìŠµë‹ˆë‹¤</p></div>';
                return;
            }

            gameState.employees.forEach((employee, index) => {
                const empDiv = document.createElement('div');
                empDiv.className = 'item-card';
                empDiv.innerHTML = `
                    <div class="item-info">
                        <div class="item-name">${employee.name} ${employee.role || 'ì§ì›'}</div>
                        <div class="item-details">
                            <span class="detail-item">ê¸‰ì—¬: <span class="cost-tag">â‚©${employee.salary.toLocaleString()}/ì¼</span></span>
                            <span class="detail-item">íš¨ìœ¨: <span class="profit-tag">${employee.efficiency}%</span></span>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button onclick="fireEmployee(${index})" class="btn-danger">í•´ê³ </button>
                    </div>
                `;
                employeeList.appendChild(empDiv);
            });
            
            document.getElementById('employeeCountBadge').textContent = gameState.employees.length;
        }

        function renderUpgrades() {
            const upgradeList = document.getElementById('upgradeList');
            upgradeList.innerHTML = '';
            
            gameState.upgrades.forEach(upgrade => {
                const upgradeDiv = document.createElement('div');
                upgradeDiv.className = 'item-card';
                const canAfford = gameState.money >= upgrade.cost;
                const canUpgrade = upgrade.level < upgrade.maxLevel;
                
                upgradeDiv.innerHTML = `
                    <div class="item-info">
                        <div class="item-name">
                            ${upgrade.icon} ${upgrade.name} 
                            <span style="color: #666; font-size: 0.9em;">(ë ˆë²¨ ${upgrade.level}/${upgrade.maxLevel})</span>
                        </div>
                        <div class="item-details">
                            <span class="detail-item">íš¨ê³¼: ${upgrade.effect}</span>
                        </div>
                    </div>
                    <div class="item-actions">
                        <span class="cost-tag" style="font-size: 1.1em; margin-right: 10px;">â‚©${upgrade.cost.toLocaleString()}</span>
                        <button onclick="buyUpgrade(${upgrade.id})" 
                                ${!canAfford || !canUpgrade ? 'disabled' : ''}
                                class="${canUpgrade ? 'btn-success' : ''}">
                            ${canUpgrade ? 'êµ¬ë§¤' : 'ìµœëŒ€ ë ˆë²¨'}
                        </button>
                    </div>
                `;
                upgradeList.appendChild(upgradeDiv);
            });
        }

        function updateCookingInfo() {
            const concurrentCookingEl = document.getElementById('concurrentCooking');
            const chefCountEl = document.getElementById('chefCount');
            
            if (concurrentCookingEl) {
                concurrentCookingEl.textContent = gameState.maxConcurrentCooking;
            }
            if (chefCountEl) {
                const chefCount = gameState.employees.filter(e => e.role === 'ì£¼ë°©ì¥' || e.role === 'ìš”ë¦¬ì‚¬').length;
                chefCountEl.textContent = chefCount;
            }
        }

        function renderCustomerQueue() {
            const queueList = document.getElementById('customerQueueList');
            const queueCount = document.getElementById('queueCount');
            
            queueCount.textContent = gameState.customerQueue.length;
            queueList.innerHTML = '';
            
            if (gameState.customerQueue.length === 0) {
                queueList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ‘¤</div><p>ëŒ€ê¸° ì¤‘ì¸ ì†ë‹˜ì´ ì—†ìŠµë‹ˆë‹¤</p></div>';
                return;
            }

            gameState.customerQueue.forEach((customer, index) => {
                const customerDiv = document.createElement('div');
                customerDiv.className = 'customer-card';
                customerDiv.onclick = () => serveCustomer(customer.id);
                
                const remainingTime = Math.max(0, customer.maxWaitTime - customer.waitTime);
                const waitPercent = (customer.waitTime / customer.maxWaitTime) * 100;
                let waitColor = '#10b981';
                let waitStatus = 'ì—¬ìœ ';
                let statusText = '';
                let buttonText = 'ì„œë¹™í•˜ê¸°';
                let buttonClass = 'btn-success';
                
                // ìƒíƒœì— ë”°ë¥¸ í‘œì‹œ
                if (customer.orderStatus === 'waiting_to_cook') {
                    statusText = 'â³ ìš”ë¦¬ ëŒ€ê¸° ì¤‘...';
                    buttonText = 'ëŒ€ê¸° ì¤‘...';
                    buttonClass = 'btn-info';
                    buttonClass += '" disabled';
                } else if (customer.orderStatus === 'cooking') {
                    const remainingCookTime = Math.max(0, customer.cookingTimeNeeded - customer.cookingTime);
                    statusText = `ğŸ³ ìš”ë¦¬ ì¤‘... (${remainingCookTime}ì´ˆ ë‚¨ìŒ)`;
                    buttonText = 'ìš”ë¦¬ ì¤‘...';
                    buttonClass = 'btn-warning';
                    buttonClass += '" disabled';
                } else if (customer.orderStatus === 'ready') {
                    statusText = 'âœ… ì„œë¹™ ì¤€ë¹„ ì™„ë£Œ';
                    buttonText = 'ì„œë¹™í•˜ê¸°';
                    buttonClass = 'btn-success';
                }
                
                if (waitPercent >= 100) {
                    waitColor = '#dc2626';
                    waitStatus = 'ë– ë‚˜ë ¤ í•¨!';
                } else if (waitPercent > 80) {
                    waitColor = '#ef4444';
                    waitStatus = 'ë§¤ìš° ë¶ˆë§Œ';
                } else if (waitPercent > 60) {
                    waitColor = '#f59e0b';
                    waitStatus = 'ë¶ˆë§Œ';
                } else if (waitPercent > 40) {
                    waitColor = '#fbbf24';
                    waitStatus = 'ì¡°ê¸ˆ ë¶ˆë§Œ';
                }
                
                const satisfactionColor = customer.satisfaction >= 4.0 ? '#10b981' : 
                                         customer.satisfaction >= 2.5 ? '#f59e0b' : '#ef4444';
                
                // ë””ë²„ê¹…ìš© (ë‚˜ì¤‘ì— ì œê±° ê°€ëŠ¥)
                if (index === 0 && gameState.customerQueue.length > 0) {
                    console.log(`[ì‹œê°„ ì—…ë°ì´íŠ¸] ì†ë‹˜ waitTime: ${customer.waitTime}, maxWaitTime: ${customer.maxWaitTime}, remainingTime: ${remainingTime}, cookingTime: ${customer.cookingTime}/${customer.cookingTimeNeeded}`);
                }
                
                customerDiv.innerHTML = `
                    <div class="item-info">
                        <div class="item-name">
                            ì†ë‹˜ ${index + 1}
                            ${customer.order ? ` - ${customer.order.name}` : ' - ì£¼ë¬¸ ëŒ€ê¸°'}
                            ${waitPercent >= 100 ? ' <span style="color: #ef4444; font-weight: bold;">âš ï¸ ë– ë‚˜ë ¤ í•¨!</span>' : ''}
                        </div>
                        <div class="item-details">
                            <span class="detail-item"><strong>${statusText}</strong></span>
                            ${customer.order ? `<span class="detail-item">ê°€ê²©: <span class="price-tag">â‚©${customer.order.price.toLocaleString()}</span></span>` : ''}
                            <span class="detail-item">â±ï¸ ë‚¨ì€ ì‹œê°„: <span style="color: ${waitColor}; font-weight: bold; font-size: 1.1em;">${remainingTime}ì´ˆ</span> / ${customer.maxWaitTime}ì´ˆ (${waitStatus})</span></span>
                            <span class="detail-item">ë§Œì¡±ë„: <span style="color: ${satisfactionColor}; font-weight: bold;">${customer.satisfaction.toFixed(1)}/5.0</span></span>
                        </div>
                        <div class="wait-time-bar">
                            <div class="wait-time-fill" style="width: ${Math.min(100, waitPercent)}%; background: ${waitColor};"></div>
                        </div>
                        ${customer.orderStatus === 'waiting_to_cook' ? `<div style="margin-top: 5px; padding: 8px; background: #e0f2fe; border-radius: 5px; font-size: 0.85em; color: #0369a1;">
                            â³ ìš”ë¦¬ ëŒ€ê¸° ì¤‘... (ì£¼ë°©ì¥ì´ ${gameState.maxConcurrentCooking}ëª…ì´ì–´ì„œ ë™ì‹œì— ${gameState.maxConcurrentCooking}ê°œë§Œ ìš”ë¦¬ ê°€ëŠ¥)
                        </div>` : ''}
                        ${customer.orderStatus === 'cooking' ? `<div style="margin-top: 5px;">
                            <div style="width: 100%; height: 6px; background: #e5e7eb; border-radius: 3px; overflow: hidden;">
                                <div style="width: ${(customer.cookingTime / customer.cookingTimeNeeded) * 100}%; height: 100%; background: var(--warning); transition: width 0.3s;"></div>
                            </div>
                            <div style="font-size: 0.85em; color: #666; margin-top: 3px;">ìš”ë¦¬ ì§„í–‰ë„: ${Math.floor((customer.cookingTime / customer.cookingTimeNeeded) * 100)}% (${customer.cookingTime}/${customer.cookingTimeNeeded}ì´ˆ)</div>
                        </div>` : ''}
                        ${waitPercent >= 90 ? '<div style="color: #ef4444; font-size: 0.85em; margin-top: 5px; font-weight: bold;">âš ï¸ ê³§ ë– ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</div>' : ''}
                    </div>
                    <div class="item-actions">
                        <button onclick="event.stopPropagation(); serveCustomer(${customer.id})" class="${buttonClass}">
                            ${buttonText}
                        </button>
                    </div>
                `;
                queueList.appendChild(customerDiv);
            });
        }

        function animateCanvas() {
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ë°°ê²½
                ctx.fillStyle = '#f8f9fa';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // ë ˆìŠ¤í† ë‘ ì‹œê°í™”
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                
                // í…Œì´ë¸” ê·¸ë¦¬ê¸°
                const tableCount = Math.min(gameState.maxCustomers, 5);
                const tableSpacing = canvas.width / (tableCount + 1);
                
                for (let i = 0; i < tableCount; i++) {
                    const x = tableSpacing * (i + 1);
                    const y = centerY;
                    
                    // í…Œì´ë¸”
                    ctx.fillStyle = '#8b4513';
                    ctx.beginPath();
                    ctx.arc(x, y, 25, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // ì†ë‹˜
                    if (i < gameState.customerQueue.length) {
                        const customer = gameState.customerQueue[i];
                        const customerX = x;
                        const customerY = y - 40;
                        
                        // ì†ë‹˜ ì›
                        ctx.fillStyle = '#4a90e2';
                        ctx.beginPath();
                        ctx.arc(customerX, customerY, 15, 0, Math.PI * 2);
                        ctx.fill();
                        
                        // í´ë¦­ ê°€ëŠ¥ í‘œì‹œ
                        ctx.strokeStyle = '#10b981';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.arc(customerX, customerY, 18, 0, Math.PI * 2);
                        ctx.stroke();
                        
                        ctx.fillStyle = '#10b981';
                        ctx.font = 'bold 10px Arial';
                        ctx.fillText('í´ë¦­!', customerX - 15, customerY - 25);
                        
                        // ë§Œì¡±ë„ í‘œì‹œ
                        ctx.fillStyle = '#fbbf24';
                        ctx.font = '12px Arial';
                        ctx.fillText('â­', customerX - 8, customerY - 30);
                        
                        // ì£¼ë¬¸ í‘œì‹œ
                        ctx.fillStyle = '#333';
                        ctx.font = '10px Arial';
                        ctx.fillText(customer.order.name.substring(0, 4), customerX - 12, customerY + 5);
                    }
                }
                
                // ì§ì› ê·¸ë¦¬ê¸°
                gameState.employees.forEach((emp, index) => {
                    const x = 50 + (index * 30);
                    const y = canvas.height - 50;
                    ctx.fillStyle = '#e74c3c';
                    ctx.beginPath();
                    ctx.arc(x, y, 12, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                animationFrame = requestAnimationFrame(draw);
            }
            draw();
        }

        function setupCanvasEvents() {
            // Canvas í´ë¦­ ì´ë²¤íŠ¸
            if (canvas) {
                canvas.addEventListener('click', function(event) {
                    if (gameState.customerQueue.length === 0) return;
                    
                    const rect = canvas.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    
                    const tableCount = Math.min(gameState.maxCustomers, 5);
                    const tableSpacing = canvas.width / (tableCount + 1);
                    const centerY = canvas.height / 2;
                    
                    gameState.customerQueue.forEach((customer, index) => {
                        const customerX = tableSpacing * (index + 1);
                        const customerY = centerY - 40;
                        const distance = Math.sqrt(Math.pow(x - customerX, 2) + Math.pow(y - customerY, 2));
                        
                        if (distance < 20) {
                            serveCustomer(customer.id);
                        }
                    });
                });
            }
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            const tabEl = document.getElementById(tabName + 'Tab');
            if (tabEl) {
                tabEl.classList.add('active');
            }
        }

        function showAddMenuModal() {
            document.getElementById('addMenuModal').classList.add('active');
            document.getElementById('menuNameInput').focus();
        }

        function showHireEmployeeModal() {
            const salary = 5000 + (gameState.employees.length * 1000);
            if (gameState.money < salary) {
                showNotification('ìê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'danger');
                return;
            }
            
            // ëª¨ë‹¬ ë‚´ ê¸‰ì—¬ ì •ë³´ ì—…ë°ì´íŠ¸
            const salaryElements = document.querySelectorAll('#hireEmployeeModal .cost-tag');
            salaryElements.forEach(el => {
                el.textContent = `â‚©${salary.toLocaleString()}/ì¼`;
            });
            
            document.getElementById('hireEmployeeModal').classList.add('active');
        }

        function showStatsModal() {
            const stats = document.getElementById('detailedStats');
            stats.innerHTML = `
                <div class="stat-card">
                    <div class="stat-label">ì´ ë§¤ì¶œ</div>
                    <div class="stat-value">â‚©${gameState.totalRevenue.toLocaleString()}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì´ ë¹„ìš©</div>
                    <div class="stat-value">â‚©${gameState.totalCost.toLocaleString()}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ìˆœì´ìµ</div>
                    <div class="stat-value">â‚©${(gameState.totalRevenue - gameState.totalCost).toLocaleString()}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">í‰ê·  ì£¼ë¬¸ê°€</div>
                    <div class="stat-value">â‚©${gameState.customersServed > 0 ? Math.floor(gameState.totalRevenue / gameState.customersServed).toLocaleString() : 0}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì—…ê·¸ë ˆì´ë“œ ë ˆë²¨</div>
                    <div class="stat-value">${gameState.upgrades.reduce((sum, u) => sum + u.level, 0)}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì§ì› ìˆ˜</div>
                    <div class="stat-value">${gameState.employees.length}</div>
                </div>
            `;
            document.getElementById('statsModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function addNewMenu() {
            const name = document.getElementById('menuNameInput').value.trim();
            const price = parseInt(document.getElementById('menuPriceInput').value);
            
            if (!name || !price || price < 1000) {
                showNotification('ì˜¬ë°”ë¥¸ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”!', 'danger');
                return;
            }
            
            const cost = Math.floor(price / 2.5);
            const newMenu = {
                id: Date.now(),
                name: name,
                price: price,
                cost: cost,
                popularity: 1.0,
                sales: 0
            };
            
            gameState.menus.push(newMenu);
            renderMenus();
            closeModal('addMenuModal');
            document.getElementById('menuNameInput').value = '';
            document.getElementById('menuPriceInput').value = '10000';
            showNotification(`ìƒˆ ë©”ë‰´ "${name}" ì¶”ê°€ë¨!`, 'success');
        }

        function updateMenuPrice(menuId, newPrice) {
            const menu = gameState.menus.find(m => m.id === menuId);
            if (menu) {
                newPrice = parseInt(newPrice);
                if (newPrice >= menu.cost) {
                    menu.price = newPrice;
                    renderMenus();
                } else {
                    showNotification('íŒë§¤ê°€ëŠ” ì›ê°€ë³´ë‹¤ ë†’ì•„ì•¼ í•©ë‹ˆë‹¤!', 'danger');
                    renderMenus();
                }
            }
        }

        function removeMenu(menuId) {
            if (gameState.menus.length <= 1) {
                showNotification('ìµœì†Œ 1ê°œì˜ ë©”ë‰´ëŠ” í•„ìš”í•©ë‹ˆë‹¤!', 'danger');
                return;
            }
            if (confirm('ì •ë§ ì´ ë©”ë‰´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                gameState.menus = gameState.menus.filter(m => m.id !== menuId);
                renderMenus();
                showNotification('ë©”ë‰´ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            }
        }

        function hireEmployeeWithRole(role) {
            const baseSalary = 5000;
            const salary = baseSalary + (gameState.employees.length * 1000);
            
            if (gameState.money < salary) {
                showNotification('ìê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'danger');
                return;
            }
            
            const names = ['ê¹€ì² ìˆ˜', 'ì´ì˜í¬', 'ë°•ë¯¼ìˆ˜', 'ì •ìˆ˜ì§„', 'ìµœë™í˜„', 'í•œì†Œì˜', 'ê°•ì§€í›ˆ', 'ìœ¤ì„œì—°', 'ì„ë„í˜„', 'ì†¡ë¯¸ì˜'];
            const name = names[Math.floor(Math.random() * names.length)];
            const efficiency = 50 + Math.floor(Math.random() * 40);
            
            const employee = {
                name: name,
                role: role,
                salary: salary,
                efficiency: efficiency
            };
            
            gameState.money -= salary;
            gameState.employees.push(employee);
            
            // ì—­í• ì— ë”°ë¥¸ íš¨ê³¼ ì ìš©
            if (role === 'ì£¼ë°©ì¥' || role === 'ìš”ë¦¬ì‚¬') {
                // ì£¼ë°© ì§ì›: ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥ ìˆ˜ ì¦ê°€
                gameState.maxConcurrentCooking += 1;
                showNotification(`${name} ${role} ê³ ìš©! ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥ ìˆ˜: ${gameState.maxConcurrentCooking}ê°œ`, 'success');
            } else if (role === 'ì„œë²„') {
                // ì„œë²„: ì†ë‹˜ ìˆ˜ìš© ì¸ì› +1
                gameState.maxCustomers += 1;
                showNotification(`${name} ${role} ê³ ìš©! ì†ë‹˜ ìˆ˜ìš© ì¸ì›: ${gameState.maxCustomers}ëª…`, 'success');
            } else if (role === 'í™€ë§¤ë‹ˆì €') {
                // í™€ë§¤ë‹ˆì €: ì†ë‹˜ ìˆ˜ìš© ì¸ì› +2
                gameState.maxCustomers += 2;
                showNotification(`${name} ${role} ê³ ìš©! ì†ë‹˜ ìˆ˜ìš© ì¸ì›: ${gameState.maxCustomers}ëª…`, 'success');
            }
            
            closeModal('hireEmployeeModal');
            renderEmployees();
            renderUpgrades();
            updateCookingInfo();
            updateDisplay();
        }

        function fireEmployee(index) {
            if (confirm('ì •ë§ ì´ ì§ì›ì„ í•´ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const employee = gameState.employees[index];
                gameState.employees.splice(index, 1);
                
                // ì—­í• ì— ë”°ë¥¸ íš¨ê³¼ ì œê±°
                if (employee.role === 'ì£¼ë°©ì¥' || employee.role === 'ìš”ë¦¬ì‚¬') {
                    gameState.maxConcurrentCooking = Math.max(1, gameState.maxConcurrentCooking - 1);
                    showNotification(`${employee.name} í•´ê³ ë¨. ë™ì‹œ ìš”ë¦¬ ê°€ëŠ¥ ìˆ˜: ${gameState.maxConcurrentCooking}ê°œ`, 'info');
                } else if (employee.role === 'ì„œë²„') {
                    gameState.maxCustomers = Math.max(3, gameState.maxCustomers - 1);
                    showNotification(`${employee.name} í•´ê³ ë¨. ì†ë‹˜ ìˆ˜ìš© ì¸ì›: ${gameState.maxCustomers}ëª…`, 'info');
                } else if (employee.role === 'í™€ë§¤ë‹ˆì €') {
                    gameState.maxCustomers = Math.max(3, gameState.maxCustomers - 2);
                    showNotification(`${employee.name} í•´ê³ ë¨. ì†ë‹˜ ìˆ˜ìš© ì¸ì›: ${gameState.maxCustomers}ëª…`, 'info');
                }
                
                renderEmployees();
                updateCookingInfo();
            }
        }

        function buyUpgrade(upgradeId) {
            const upgrade = gameState.upgrades.find(u => u.id === upgradeId);
            if (!upgrade || upgrade.level >= upgrade.maxLevel) return;
            
            if (gameState.money < upgrade.cost) {
                showNotification('ìê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤!', 'danger');
                return;
            }
            
            gameState.money -= upgrade.cost;
            upgrade.level++;
            upgrade.cost = Math.floor(upgrade.cost * 1.8);
            
            applyUpgradeEffect(upgrade);
            
            renderUpgrades();
            updateDisplay();
            showNotification(`${upgrade.name} ë ˆë²¨ ${upgrade.level} ì™„ë£Œ!`, 'success');
        }

        function applyUpgradeEffect(upgrade) {
            switch(upgrade.id) {
                case 1:
                    // ì£¼ë°© í™•ì¥ íš¨ê³¼ëŠ” ìˆ˜ë™ ëª¨ë“œì—ì„œëŠ” ì ìš© ì•ˆë¨
                    break;
                case 2:
                    gameState.maxCustomers += 2;
                    break;
                case 3:
                    gameState.rating = Math.min(5.0, gameState.rating + 0.5);
                    break;
                case 4:
                    gameState.menus.forEach(menu => {
                        menu.popularity += 0.15;
                    });
                    break;
            }
        }

        function saveGame() {
            localStorage.setItem('tycoonGameSave', JSON.stringify(gameState));
            showNotification('ê²Œì„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
        }

        function loadGame() {
            const saveData = localStorage.getItem('tycoonGameSave');
            if (!saveData) {
                showNotification('ì €ì¥ëœ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤!', 'danger');
                return;
            }
            
            if (confirm('ì €ì¥ëœ ê²Œì„ì„ ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ ì§„í–‰ ìƒí™©ì€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')) {
                gameState = JSON.parse(saveData);
                initGame();
                showNotification('ê²Œì„ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!', 'success');
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            
            const colors = {
                success: 'linear-gradient(135deg, var(--success), #059669)',
                danger: 'linear-gradient(135deg, var(--danger), #dc2626)',
                info: 'linear-gradient(135deg, var(--info), #2563eb)',
                warning: 'linear-gradient(135deg, var(--warning), #d97706)'
            };
            
            notification.style.background = colors[type] || colors.success;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.3s ease-out reverse';
                setTimeout(() => notification.remove(), 300);
            }, 2500);
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Enter í‚¤ë¡œ ëª¨ë‹¬ í™•ì¸
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const activeModal = document.querySelector('.modal.active');
                if (activeModal && activeModal.id === 'addMenuModal') {
                    addNewMenu();
                }
            }
        });

        // ì°½ í¬ê¸° ë³€ê²½ ì‹œ Canvas ë¦¬ì‚¬ì´ì¦ˆ
        window.addEventListener('resize', function() {
            if (canvas) {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            }
        });

        // ê²Œì„ ì‹œì‘
        initGame();
    </script>
</body>
</html>

